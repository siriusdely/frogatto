{
id: "milgram_block",
prototype: ["ant"],
solid_area: [2,9,22,25],
properties: {
	attack_damage: "if(animation in ['fall','spring'] and level.player.difficulty >= difficulties.challenging, 3, 1)",
	turns_at_cliffs: "false",
	springiness: "0",
	points_value: "25",
},

on_process_stand: "if(is_standing, animation('walk'),if(velocity_y > 700,animation('fall')))",
on_collide_feet: "if(velocity_y > 700, animation('spring'),animation('walk'))",
on_end_spawned_anim: "animation('fall')",
on_process_walk: "set(accel_x,200)",
on_die: "[	spawn('effect_initiator',mid_x,mid_y,facing,child.death_effects('medium')),
			sound('BlockBreak.ogg'),
			map([0]*(5+1d3), spawn('bouncing_debris_chunk', mid_x, mid_y + 1d30 - 1d30, if(1d2=2,1,-1), [add(child.variations, ['rock_small_cement']),child.init_vel('burst')])),
			map([0]*2d3, spawn('bouncing_debris_chunk', mid_x, mid_y + 1d30 - 1d30, if(1d2=2,1,-1), [add(child.variations, ['rock_big_cement']),child.init_vel('burst')]))
		]",
on_footfall: "[sound('milgram-block-footstep'+1d7+'.wav', volume)] where volume = lib.math.constrain(0, 300.0/lib.math.length(self, level.player),1.0)",
editor_info: {
	category: "enemies, milgramen",
},
animation: [
	{
		image: "enemies/milgram-block.png",
		rotate_on_slope: true,
		pad: 3,
		accel_x: 0,
		accel_y: 0,
		velocity_x: 0,
		velocity_y: 0,
		body_area: "all",
		id: "spawned",
		rect: [176,33,200,60],
		duration: 5,
	},
	{
		image: "enemies/milgram-block.png",
		rotate_on_slope: true,
		pad: 3,
		accel_x: 0,
		accel_y: 80,
		body_area: "all",
		id: "fall",
		rect: [176,1,200,28],
		attack_area: [2,15,23,27],
	},

	#Ants and beetles all share the same frame layout and timings:
	{
		image: "enemies/milgram-block.png",
		rotate_on_slope: true,
		pad: 3,
		accel_x: 0,
		accel_y: 80,
		body_area: "all",
		id: "stand",
		rect: [3,1,27,28],
		frames: 1,
		duration: 6,
		attack_area: [15,18,26,26],
	},
	{
		image: "enemies/milgram-block.png",
		rotate_on_slope: true,
		pad: 3,
		accel_x: 250,
		accel_y: 80,
		body_area: "all",
		id: "walk",
		events: "0:footfall",
		#blink variant
		attack_area: [15,18,26,26],
		rect: [89,1,113,28],
		frames: 3,
		duration: 6,
	},
	{
		image: "enemies/milgram-block.png",
		rotate_on_slope: true,
		pad: 3,
		accel_x: 250,
		accel_y: 80,
		body_area: "all",
		id: "walk",
		events: "0:footfall",
		attack_area: [15,18,26,26],
		duplicates: 6,
		rect: [3,1,27,28],
		frames: 3,
		duration: 6,
	},
	{
		image: "enemies/milgram-block.png",
		rotate_on_slope: true,
		pad: 3,
		accel_x: 0,
		accel_y: 80,
		body_area: "all",
		id: "spring",
		rect: [3,33,27,60],
		frames: 1,
		duration: 4,
	},
	{
		image: "enemies/milgram-block.png",
		rotate_on_slope: true,
		pad: 3,
		accel_x: 0,
		accel_y: 80,
		body_area: "all",
		id: "turn",
		rect: [3,65,27,92],
		frames: 3,
		duration: 4,
		attack_area: [0,18,26,26],
	},
	{
		image: "enemies/milgram-block.png",
		rotate_on_slope: true,
		pad: 3,
		accel_x: 0,
		accel_y: 80,
		body_area: "all",
		id: "hurt",
		rect: [90,65,114,92],
		frames: 1,
		duration: 18,
	},
],
object_type: {
	id: "thrown",
	prototype: ["throwable_small_enemy"],
	solid_area: [2,9,22,25],
	animation: [
		{
			image: "enemies/milgram-block.png",
			id: "thrown",
			thrown_area: "all",
			duration: 60,
			rect: [31,33,55,60],
			frames: 1,
			body_area: null,
		},
		{
			image: "enemies/milgram-block.png",
			id: "on_back",
			rect: [31,33,55,60],
			frames: 2,
			duration: 5,
			body_area: "all",
		},
	],
},
}
