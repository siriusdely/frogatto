{
id: "piston_machine",
zorder: "@include data/zorder.cfg:exterior_decor",
prototype: ["hittable"],
properties: {
	team: "'neutral'",
	attack_damage: 400,
	attack_damage_to_player: "if(higher_difficulty, 2, 1)",
},
on_start_level: "[spawn('piston_machine.front_wheel',mid_x-40*facing,mid_y+44,facing),
				spawn('piston_machine.back_wheel',mid_x-40*facing,mid_y+24,facing),
				add_particles('steam'),
				
				spawn('sound_source_individual',mid_x,mid_y,{sound_file:'ambient/mech.ogg'})]",
on_end_normal_anim: "animation('normal')",

#platform_area=12,15,38,16
editor_info: {
	category: "decor, utility",
},
animation: {
	id: "normal",
	image: "props/piston-machine.png",
	rect: [1,1,68,80],
	pad: 2,
	frames: 13,
	duration: 5,
	attack_area: [10,20,46,60],
	palettes: "@include data/palettes.cfg:dungeon_palettes",
},
object_type: [
	{
		id: "front_wheel",
		zorder: "@include data/zorder.cfg:exterior_decor",
		zsub_order: 5,
		on_process: "add(rotate,5)",
		animation: {
			id: "normal",
			image: "props/piston-machine.png",
			rect: [878,86,908,116],
			frames: 1,
			duration: 5,
			palettes: "@include data/palettes.cfg:dungeon_palettes",
		},
	},
	{
		id: "back_wheel",
		zorder: "@include data/zorder.cfg:exterior_decor",
		zsub_order: -5,
		on_process: "add(rotate,5)",
		animation: {
			id: "normal",
			image: "props/piston-machine.png",
			rect: [917,1,962,46],
			frames: 1,
			duration: 5,
			palettes: "@include data/palettes.cfg:dungeon_palettes",
		},
	},
],
particle_system: {
	id: "steam",
	type: "simple",
	spawn_rate: 200,
	time_to_live: 75,
	min_x: 110,
	max_x: 120,
	min_y: 35,
	max_y: 45,
	velocity_y: -200,
	velocity_x: 200,
	velocity_x_random: 400,
	velocity_y_random: 400,
	accel_y: -40,
	accel_x: -6,

	#color=255,255,255,255
	delta_a: 1,
	animation: {
		id: "normal",
		image: "effects/particles.png",
		x: 3,
		y: 67,
		w: 9,
		h: 9,
		pad: 3,
		frames: 5,
		duration: 15,
		accel_y: -2,
	},
},
}